#!/bin/bash

# Direct Supabase Storage Setup
# Creates storage bucket using database connection directly

set -e

echo "ğŸš€ Setting up Supabase storage bucket directly..."

# Run the storage setup SQL using our existing database script runner
echo "ğŸ“¦ Creating food-photos bucket and policies..."
./bin/run-db-script database/05-storage-bucket-setup.sql

echo "âœ… Storage bucket setup complete!"
echo "   ğŸª£ Bucket: food-photos"
echo "   ğŸ‘€ Public read: Enabled"
echo "   ğŸ” Upload: Authenticated users only"
echo "   ğŸ“ Size limit: 50MB"
echo "   ğŸ“· Types: JPEG, PNG, HEIC, WebP"
echo ""
echo "You can now:"
echo "   â€¢ Upload photos via the iOS app"
echo "   â€¢ View photos at: YOUR_SUPABASE_URL/storage/v1/object/public/food-photos/filename"
echo "   â€¢ Test upload via Supabase dashboard Storage section"